Dentro l'helper bisogna andare ad invocare funzioni del runtime di SymQEMU e poi dichiarare i metodi delle classi senza in:
https://github.com/ZioSaba/symcc/blob/master/runtime/qsym_backend/qsym/qsym/pintool/codegen/expr_builder.cpp




Quali parametri dovrà prendere la mia sym_FloatingPointAdd:
- se la sorgente è un puntatore a memoria
  # bisogna andare a leggere nella memoria simbolica a quell'indirizzo nei rispettivi indirizzi (sym_read di 4 byte)
  # creare l'espressione della somma
  # scrivere l'espressione nella memoria simbolica del puntatore destinazione (sym_write di 4 byte)
  
  
  
Modificare la memoria simbolica facendo in modo che possa gestire correttamente i dati FP.
Vedi in RuntimeCommon.cpp per studiarti il backend simple e vedere le operazioni di lettura e scrittura in memoria.

Parti con implementare un helper che fa una printf() e vedi ti viene eseguito (dopo aver fatto le modifiche dette sopra). 
Se ti viene eseguito allora inizi a pensare a cosa deve fare questo helper. L'helper dovrà a grandi linee:

1) leggere l'espressione simbolica dalla memoria simbolica all'indirizzo a cui QEMU tiene registro sorgente XMM. sym_read_memory() ti restituirà una ConcatExpr di ExtractExpr su FloatingPointExpr (che devi definire tu).
Tu devi navigare le espressione e guardare solo FloatingPointExpr.

2)  leggere l'espressione simbolica dalla memoria simbolica all'indirizzo a cui QEMU tiene registro destinazione XMM. sym_read_memory() ti restituirà una ConcatExpr di ExtractExpr su FloatingPointExpr (che devi definire tu). 
Tu devi navigare le espressione e guardare solo FloatingPointExpr.

3) costruire un espressione FloatingPointAddExpr usando come operandi quello che hai ottenuto a (1) e (2)

4) scriviere (3) in memoria simbolica con sym_write_memory all'indirizzo a cui QEMU tiene registro destinazione XMM. Internamente sym_write_memory() "spezzerà" in diverse ExtractExpr la tua FloatingPointAddExpr


In Z3, sempre verificare che l'espressione su cui si lavora è di classe integer o floating point, perché se la seconda allora posso direttamente prendere l'argomento e lavorare su quello.







ALTRI HELPER:
- conversione da intero a FP
- conversione da FP a intero
- comparazione
